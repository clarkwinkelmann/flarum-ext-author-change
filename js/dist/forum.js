module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=13)}([function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["utils/DiscussionControls"]},function(t,n){t.exports=flarum.core.compat["utils/PostControls"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["models/Post"]},function(t,n){t.exports=flarum.core.compat["helpers/avatar"]},function(t,n){t.exports=flarum.core.compat["helpers/username"]},function(t,n){t.exports=flarum.core.compat["components/Search"]},function(t,n){t.exports=flarum.core.compat["utils/ItemList"]},function(t,n){t.exports=flarum.core.compat["utils/extractText"]},function(t,n){t.exports=flarum.core.compat["components/UsersSearchSource"]},,function(t,n,e){"use strict";e.r(n);var r=e(1),o=e(2),a=e.n(o),i=e(3),c=e.n(i),u=e(0),s=e.n(u);function l(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var p=e(4),f=e.n(p),d=e(5),h=e.n(d),g=e(6),v=e.n(g),y=e(7),x=e.n(y),k=e(8),w=e.n(k),b=e(9),S=e.n(b),C=e(10),_=e.n(C),j=e(11),B=function(t){function n(){return t.apply(this,arguments)||this}return l(n,t),n.prototype.view=function(n){var e=t.prototype.view.call(this,n);if(!e)return"";var r=e[1];return r.forEach((function(t){delete t.children[0].attrs.config})),r},n}(e.n(j).a),O=function(t){function n(){return t.apply(this,arguments)||this}l(n,t);var e=n.prototype;return e.selectUserIndex=function(t){var n=t.split("users")[1],e=app.store.getById("users",n);this.props.onsubmit(e)},e.config=function(n){var e=this;t.prototype.config.call(this,n),n||this.$(".Search-results").on("click",(function(t){var n=$(t.target).parents(".UserSearchResult");n.length&&(t.preventDefault(),e.selectUserIndex(n.data("index")))}))},e.getCurrentSearch=function(){return""},e.selectResult=function(){clearTimeout(this.searchTimeout),this.loadingSources=0,this.value()?this.selectUserIndex(this.index):this.clear(),this.$("input").blur()},e.clear=function(){this.value(""),m.redraw()},e.sourceItems=function(){var t=new S.a;return app.forum.attribute("canViewUserList")&&t.add("users",new B),t},e.view=function(){var n=t.prototype.view.call(this);return n.children[0].children[0].attrs.placeholder=_()(app.translator.trans("clarkwinkelmann-author-change.forum.modal.search_placeholder")),n},n}(w.a),P=function(t){function n(n){var e;return(e=t.call(this)||this).related=n,e.user=n.user(),e.dirty=!1,e.loading=!1,e}l(n,t);var e=n.prototype;return e.isPost=function(){return this.related instanceof h.a},e.className=function(){return"Update-Author-Modal"},e.title=function(){return app.translator.trans("clarkwinkelmann-author-change.forum.modal.title-"+(this.isPost()?"post":"discussion"))},e.content=function(){var t=this;return m(".Modal-body",[m(".Form-group",[m(".FormControl.SelectedUser",[this.user?s.a.component({icon:"fas fa-times",onclick:function(){t.user=null,t.dirty=!0},className:"Button Button--icon Button--link RemoveUserButton"}):null,v()(this.user),x()(this.user)]),O.component({onsubmit:function(n){t.user=n,t.dirty=!0,m.redraw()}})]),m(".Form-group",[s.a.component({disabled:!this.dirty,loading:this.loading,type:"submit",className:"Button Button--primary",children:app.translator.trans("clarkwinkelmann-author-change.forum.modal.submit")}),s.a.component({className:"Button CancelButton",children:app.translator.trans("clarkwinkelmann-author-change.forum.modal.cancel"),onclick:function(){app.modal.close()}})])])},e.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,this.related.save({relationships:{user:null!==this.user?this.user:[]}}).then((function(){n.loading=!1,n.dirty=!1,m.redraw()})).catch((function(t){throw n.loading=!1,m.redraw(),t}))},n}(f.a);app.initializers.add("clarkwinkelmann/flarum-ext-author-change",(function(){Object(r.extend)(a.a,"moderationControls",(function(t,n){app.forum.attribute("clarkwinkelmannAuthorChangeCanEdit")&&t.add("clarkwinkelmann-author-change",s.a.component({icon:"fas fa-user-edit",children:app.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){app.modal.show(new P(n))}}))})),Object(r.extend)(c.a,"moderationControls",(function(t,n){app.forum.attribute("clarkwinkelmannAuthorChangeCanEdit")&&t.add("clarkwinkelmann-author-change",s.a.component({icon:"fas fa-user-edit",children:app.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){app.modal.show(new P(n))}}))}))}))}]);
//# sourceMappingURL=forum.js.map