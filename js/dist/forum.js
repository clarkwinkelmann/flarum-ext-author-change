module.exports=function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=14)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["utils/DiscussionControls"]},function(t,n){t.exports=flarum.core.compat["utils/PostControls"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["models/Post"]},function(t,n){t.exports=flarum.core.compat["helpers/avatar"]},function(t,n){t.exports=flarum.core.compat["helpers/username"]},function(t,n){t.exports=flarum.core.compat["components/Search"]},function(t,n){t.exports=flarum.core.compat["utils/ItemList"]},function(t,n){t.exports=flarum.core.compat["utils/extractText"]},function(t,n){t.exports=flarum.core.compat["components/UsersSearchSource"]},,function(t,n,r){"use strict";r.r(n);var e=r(2),o=r(0),a=r.n(o),c=r(3),i=r.n(c),u=r(4),s=r.n(u),l=r(1),f=r.n(l);function h(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var p=r(5),d=r.n(p),g=r(6),y=r.n(g),k=r(7),v=r.n(k),x=r(8),w=r.n(x),b=r(9),S=r.n(b),C=r(10),O=r.n(C),j=r(11),B=r.n(j),U=r(12),_=function(t){function n(){return t.apply(this,arguments)||this}return h(n,t),n.prototype.view=function(n){var r=t.prototype.view.call(this,n);if(!r)return n.length<3?m("li",f.a.component({icon:"fas fa-info-circle",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")})):m("li",f.a.component({icon:"fas fa-search-minus",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.search.no-results")}));var e=null;return r.some((function(t){return!!(Array.isArray(t)&&t.length>0&&t[0].attrs&&-1!==t[0].attrs.className.indexOf("UserSearchResult"))&&(e=t,!0)})),null===e?m("li","[extension conflict]"):(e.forEach((function(t){Array.isArray(t.children)&&t.children.length>0&&delete t.children[0].attrs.config})),n.length<3&&e.push(m("li",f.a.component({icon:"fas fa-info-circle",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")}))),e)},n}(r.n(U).a),P=function(t){function n(){return t.apply(this,arguments)||this}h(n,t);var r=n.prototype;return r.selectUserIndex=function(t){var n=t.split("users")[1],r=a.a.store.getById("users",n);this.props.onsubmit(r)},r.config=function(n){var r=this;t.prototype.config.call(this,n),n||this.$(".Search-results").on("click",(function(t){var n=$(t.target).parents(".UserSearchResult");n.length&&(t.preventDefault(),r.selectUserIndex(n.data("index")))}))},r.getCurrentSearch=function(){return""},r.selectResult=function(){clearTimeout(this.searchTimeout),this.loadingSources=0,this.value()?this.selectUserIndex(this.index):this.clear(),this.$("input").blur()},r.clear=function(){this.value(""),m.redraw()},r.sourceItems=function(){var t=new O.a;return a.a.forum.attribute("canViewUserList")&&t.add("users",new _),t},r.view=function(){var n=t.prototype.view.call(this);return n.children[0].children[0].attrs.placeholder=B()(a.a.translator.trans("clarkwinkelmann-author-change.forum.search.placeholder")),n},n}(S.a),A=function(t){function n(n){var r;return(r=t.call(this)||this).related=n,r.user=n.user(),r.dirty=!1,r.loading=!1,r}h(n,t);var r=n.prototype;return r.isPost=function(){return this.related instanceof y.a},r.className=function(){return"Update-Author-Modal"},r.title=function(){return a.a.translator.trans("clarkwinkelmann-author-change.forum.modal.title-"+(this.isPost()?"post":"discussion"))},r.content=function(){var t=this;return m(".Modal-body",[m(".Form-group",[m(".FormControl.SelectedUser",[this.user?f.a.component({icon:"fas fa-times",onclick:function(){t.user=null,t.dirty=!0},className:"Button Button--icon Button--link RemoveUserButton"}):null,v()(this.user),w()(this.user)]),P.component({onsubmit:function(n){t.user=n,t.dirty=!0,m.redraw()}})]),m(".Form-group",[f.a.component({disabled:!this.dirty,loading:this.loading,type:"submit",className:"Button Button--primary",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.modal.submit")}),f.a.component({className:"Button CancelButton",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.modal.cancel"),onclick:function(){a.a.modal.close()}})])])},r.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,this.related.save({relationships:{user:null!==this.user?this.user:[]}}).then((function(){n.loading=!1,n.dirty=!1,m.redraw(),a.a.modal.close()})).catch((function(t){throw n.loading=!1,m.redraw(),t}))},n}(d.a);a.a.initializers.add("clarkwinkelmann/flarum-ext-author-change",(function(){Object(e.extend)(i.a,"moderationControls",(function(t,n){a.a.forum.attribute("clarkwinkelmannAuthorChangeCanEdit")&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){a.a.modal.show(new A(n))}}))})),Object(e.extend)(s.a,"moderationControls",(function(t,n){a.a.forum.attribute("clarkwinkelmannAuthorChangeCanEdit")&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",children:a.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){a.a.modal.show(new A(n))}}))}))}))}]);
//# sourceMappingURL=forum.js.map