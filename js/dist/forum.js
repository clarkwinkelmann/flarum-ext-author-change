module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=14)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["utils/DiscussionControls"]},function(t,n){t.exports=flarum.core.compat["utils/PostControls"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["models/Post"]},function(t,n){t.exports=flarum.core.compat["helpers/avatar"]},function(t,n){t.exports=flarum.core.compat["helpers/username"]},function(t,n){t.exports=flarum.core.compat["components/Search"]},function(t,n){t.exports=flarum.core.compat["utils/ItemList"]},function(t,n){t.exports=flarum.core.compat["utils/extractText"]},function(t,n){t.exports=flarum.core.compat["components/UsersSearchSource"]},,function(t,n,e){"use strict";e.r(n);var r=e(2),a=e(0),o=e.n(a),i=e(3),c=e.n(i),u=e(4),l=e.n(u),s=e(1),f=e.n(s);function d(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var h=e(5),p=e.n(h),g=e(6),k=e.n(g),y=e(7),b=e.n(y),w=e(8),v=e.n(w),x=e(9),A=e.n(x),C=e(10),S=e.n(C),O=e(11),U=e.n(O),_=e(12),P=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(n){var e=t.prototype.view.call(this,n);if(!e)return n.length<3?m("li",f.a.component({icon:"fas fa-info-circle",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")})):m("li",f.a.component({icon:"fas fa-search-minus",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.search.no-results")}));var r=null;return e.some((function(t){return!!(Array.isArray(t)&&t.length>0&&t[0].attrs&&-1!==t[0].attrs.className.indexOf("UserSearchResult"))&&(r=t,!0)})),null===r?m("li","[extension conflict]"):(r.forEach((function(t){Array.isArray(t.children)&&t.children.length>0&&delete t.children[0].attrs.config})),n.length<3&&r.push(m("li",f.a.component({icon:"fas fa-info-circle",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")}))),r)},n}(e.n(_).a),j=function(t){function n(){return t.apply(this,arguments)||this}d(n,t);var e=n.prototype;return e.selectUserIndex=function(t){var n=t.split("users")[1],e=o.a.store.getById("users",n);this.props.onsubmit(e)},e.config=function(n){var e=this;t.prototype.config.call(this,n),n||this.$(".Search-results").on("click",(function(t){var n=$(t.target).parents(".UserSearchResult");n.length&&(t.preventDefault(),e.selectUserIndex(n.data("index")))}))},e.getCurrentSearch=function(){return""},e.selectResult=function(){clearTimeout(this.searchTimeout),this.loadingSources=0,this.value()?this.selectUserIndex(this.index):this.clear(),this.$("input").blur()},e.clear=function(){this.value(""),m.redraw()},e.sourceItems=function(){var t=new S.a;return o.a.forum.attribute("canViewUserList")&&t.add("users",new P),t},e.view=function(){var n=t.prototype.view.call(this);return n.children[0].children[0].attrs.placeholder=U()(o.a.translator.trans("clarkwinkelmann-author-change.forum.search.placeholder")),n},n}(A.a),B=function(t){function n(n){var e;return(e=t.call(this)||this).related=n,e.user=n.user(),e.createdAt=n.createdAt().toISOString().slice(0,16),e.editedAt=e.isPost()&&n.editedAt()?n.editedAt().toISOString().slice(0,16):"",e.attributes={},e.dirty=!1,e.loading=!1,e}d(n,t);var e=n.prototype;return e.isPost=function(){return this.related instanceof k.a},e.className=function(){return"Update-Author-Modal"},e.title=function(){return o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.title-"+(this.isPost()?"post":"discussion"))},e.content=function(){var t=this;return m(".Modal-body",[o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")?m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.user")),m(".FormControl.SelectedUser",[this.user?f.a.component({icon:"fas fa-times",onclick:function(){t.user=null,t.attributes.relationships={user:[]},t.dirty=!0},className:"Button Button--icon Button--link RemoveUserButton"}):null,b()(this.user),v()(this.user)]),j.component({onsubmit:function(n){t.user=n,t.attributes.relationships={user:n},t.dirty=!0,m.redraw()}})]):null,o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate")?[m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.created_at")),m("input[type=datetime-local][required].FormControl",{value:this.createdAt,onchange:m.withAttr("value",(function(n){t.createdAt=n,t.attributes.createdAt=n,t.dirty=!0}))})]),this.isPost()?m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.edited_at")),m("input[type=datetime-local].FormControl",{value:this.editedAt,onchange:m.withAttr("value",(function(n){t.editedAt=n,t.attributes.editedAt=n,t.dirty=!0}))})]):null]:null,m(".Form-group",[f.a.component({disabled:!this.dirty,loading:this.loading,type:"submit",className:"Button Button--primary",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.submit")}),f.a.component({className:"Button CancelButton",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.cancel"),onclick:function(){o.a.modal.close()}})])])},e.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,this.related.save(this.attributes).then((function(){n.loading=!1,n.dirty=!1,m.redraw(),o.a.modal.close()})).catch((function(t){throw n.loading=!1,m.redraw(),t}))},n}(p.a);o.a.initializers.add("clarkwinkelmann/flarum-ext-author-change",(function(){Object(r.extend)(c.a,"moderationControls",(function(t,n){(o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")||o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate"))&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){o.a.modal.show(new B(n))}}))})),Object(r.extend)(l.a,"moderationControls",(function(t,n){(o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")||o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate"))&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",children:o.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit"),onclick:function(){o.a.modal.show(new B(n))}}))}))}))}]);
//# sourceMappingURL=forum.js.map