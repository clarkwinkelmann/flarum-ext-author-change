module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=15)}([function(t,e){t.exports=flarum.core.compat["forum/app"]},function(t,e){t.exports=flarum.core.compat["common/components/Button"]},,function(t,e){t.exports=flarum.core.compat["common/extend"]},function(t,e){t.exports=flarum.core.compat["common/models/Post"]},function(t,e){t.exports=flarum.core.compat["forum/utils/DiscussionControls"]},function(t,e){t.exports=flarum.core.compat["forum/utils/PostControls"]},function(t,e){t.exports=flarum.core.compat["common/components/Modal"]},function(t,e){t.exports=flarum.core.compat["common/helpers/avatar"]},function(t,e){t.exports=flarum.core.compat["common/helpers/username"]},function(t,e){t.exports=flarum.core.compat["forum/states/SearchState"]},function(t,e){t.exports=flarum.core.compat["forum/components/Search"]},function(t,e){t.exports=flarum.core.compat["common/utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["common/utils/extractText"]},function(t,e){t.exports=flarum.core.compat["forum/components/UsersSearchSource"]},function(t,e,r){"use strict";r.r(e);var n=r(3),a=r(0),o=r.n(a),i=r(5),c=r.n(i),s=r(6),u=r.n(s),l=r(1),f=r.n(l);function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}var p=r(7),g=r.n(p),k=r(4),y=r.n(k),v=r(8),b=r.n(v),w=r(9),x=r.n(w),S=r(10),A=r.n(S),C=r(11),O=r.n(C),U=r(12),_=r.n(U),j=r(13),P=r.n(j),B=r(14),E=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(e){var r=t.prototype.view.call(this,e);if(0===r.length)return e.length<3?[m("li",f.a.component({icon:"fas fa-info-circle"},o.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")))]:[m("li",f.a.component({icon:"fas fa-search-minus"},o.a.translator.trans("clarkwinkelmann-author-change.forum.search.no-results")))];var n=[];return r.some((function(t){return!(!t.attrs||-1===t.attrs.className.indexOf("UserSearchResult"))&&(n.push(t),!0)})),0===n.length?[m("li","[extension conflict]")]:(n.forEach((function(t){Array.isArray(t.children)&&t.children.length>0&&(t.children[0].tag="a")})),e.length<3&&n.push(m("li",f.a.component({icon:"fas fa-info-circle"},o.a.translator.trans("clarkwinkelmann-author-change.forum.search.type-more")))),n)},e}(r.n(B).a),F=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var r=e.prototype;return r.selectUserElement=function(t){var e=t.dataset.index;if(e){var r=e.split("users")[1],n=o.a.store.getById("users",r);this.attrs.onsubmit(n)}},r.oncreate=function(e){var r=this;t.prototype.oncreate.call(this,e),this.$(".Search-results").on("click",(function(t){var e=$(t.target).parents(".UserSearchResult");e.length&&(t.preventDefault(),r.selectUserElement(e.get(0)))}))},r.selectResult=function(){clearTimeout(this.searchTimeout),this.loadingSources=0,this.state.getValue()?this.selectUserElement(this.getItem(this.index).get(0)):this.clear(),this.$("input").trigger("blur")},r.clear=function(){t.prototype.clear.call(this),m.redraw()},r.sourceItems=function(){var t=new _.a;return o.a.forum.attribute("canSearchUsers")&&t.add("users",new E),t},r.view=function(){var e=t.prototype.view.call(this);return e.children[0].children[0].attrs.placeholder=P()(o.a.translator.trans("clarkwinkelmann-author-change.forum.search.placeholder")),e},e}(O.a),I=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).attrs=void 0,e.user=void 0,e.createdAt=void 0,e.editedAt=void 0,e.attributes={},e.dirty=!1,e.loading=!1,e.userSearchState=void 0,e}d(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e);var r=this.attrs.related instanceof y.a&&this.attrs.related.editedAt();this.user=this.attrs.related.user(),this.createdAt=this.attrs.related.createdAt().toISOString().slice(0,16),this.editedAt=r?r.toISOString().slice(0,16):"",this.userSearchState=new A.a,this.userSearchState.getInitialSearch=function(){return""}},r.isPost=function(){return this.attrs.related instanceof y.a},r.className=function(){return"Update-Author-Modal"},r.title=function(){return o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.title-"+(this.isPost()?"post":"discussion"))},r.content=function(){var t=this;return m(".Modal-body",[o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")?m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.user")),m(".FormControl.SelectedUser",[this.user?f.a.component({icon:"fas fa-times",onclick:function(){t.user=null,t.attributes.relationships={user:[]},t.dirty=!0},className:"Button Button--icon Button--link RemoveUserButton"}):null,b()(this.user),x()(this.user)]),F.component({state:this.userSearchState,onsubmit:function(e){t.user=e,t.attributes.relationships={user:e},t.dirty=!0,m.redraw()}})]):null,o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate")?[m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.created_at")),m("input[type=datetime-local][required].FormControl",{value:this.createdAt,onchange:function(e){var r=e.target.value;t.createdAt=r,t.attributes.createdAt=r,t.dirty=!0}})]),this.isPost()?m(".Form-group",[m("label",o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.edited_at")),m("input[type=datetime-local].FormControl",{value:this.editedAt,onchange:function(e){var r=e.target.value;t.editedAt=r,t.attributes.editedAt=r,t.dirty=!0}})]):null]:null,m(".Form-group",[f.a.component({disabled:!this.dirty,loading:this.loading,type:"submit",className:"Button Button--primary"},o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.submit")),f.a.component({className:"Button CancelButton",onclick:function(){o.a.modal.close()}},o.a.translator.trans("clarkwinkelmann-author-change.forum.modal.cancel"))])])},r.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.attrs.related.save(this.attributes).then((function(){e.loading=!1,e.dirty=!1,m.redraw(),o.a.modal.close()})).catch((function(t){throw e.loading=!1,m.redraw(),t}))},e}(g.a);o.a.initializers.add("clarkwinkelmann-author-change",(function(){Object(n.extend)(c.a,"moderationControls",(function(t,e){(o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")||o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate"))&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",onclick:function(){o.a.modal.show(I,{related:e})}},o.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit")))})),Object(n.extend)(u.a,"moderationControls",(function(t,e){(o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditUser")||o.a.forum.attribute("clarkwinkelmannAuthorChangeCanEditDate"))&&t.add("clarkwinkelmann-author-change",f.a.component({icon:"fas fa-user-edit",onclick:function(){o.a.modal.show(I,{related:e})}},o.a.translator.trans("clarkwinkelmann-author-change.forum.controls.edit")))}))}))}]);
//# sourceMappingURL=forum.js.map